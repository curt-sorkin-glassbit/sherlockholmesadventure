<!DOCTYPE html>
<html>

<head>
    <title>4-Lugi's Hammer</title>
    <style>
        canvas {
            border: #333 10px solid;
        }

        body {
            padding: 50px;
        }
    </style>
</head>


<body>

    <canvas id="myCanvas" width="550px" height="350px"></canvas>



    <script>


        function sprite(options) {

            var that = {};

            that.context = options.context;
            that.width = options.width;
            that.height = options.height;
            that.totalFrames = options.totalFrames;
            that.image = options.image;

            that.shift = 0;
            that.currentFrame = 1;
            

            that.render = function () {
                // clear the canvas
                that.context.clearRect(120, 25, 300, 300);
                //draw each frame + place them in the middle
                that.context.drawImage(that.image, that.shift, 0, that.width, that.height,
                    120, 25, that.width, that.height);

                if (that.currentFrame == that.totalFrames) {
                    that.shift = 0;
                    that.currentFrame = 1;
                }
                else {
                    that.shift += that.width + 1;
                    that.currentFrame++;
                }

                // TBD: How could we "throttle" the animation to be x fps?
                requestAnimationFrame(that.render);

            };

            return that;
        }


        var canvas = document.querySelector("#myCanvas");
        var context = canvas.getContext("2d");
        var myImage = new Image();
        myImage.src = "images/luigi-128-Hammer-sprite-sheet.png";
        myImage.addEventListener("load", loadImage, false);

        function loadImage(e) {
            var mySprite = new sprite({
                "context": context,
                "width": 79,
                "height": 79,
                "totalFrames": 5,
                "image": myImage
            });
            mySprite.render();
        }




    </script>

</body>

</html>